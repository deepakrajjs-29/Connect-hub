<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConnectHub - Real-Time Communication Platform</title>
    <meta name="description" content="Modern communication platform with real-time video calling, voice chat, and messaging">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/modern-theme.css">
    <link rel="stylesheet" href="css/modern-buttons.css">
    <link rel="stylesheet" href="css/animated-backgrounds.css">
    <link rel="stylesheet" href="css/auth-styles.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/additional-styles.css">
    <link rel="stylesheet" href="css/group-styles.css">
    
    <!-- Socket.IO Client -->
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
</head>
<body>
    <!-- Authentication Screen -->
    <div id="auth-screen" class="auth-screen active">
        <div class="auth-container">
            <div class="auth-header">
                <h1 class="auth-logo">ConnectHub</h1>
                <p class="auth-tagline">Connect with friends through video, voice, and chat</p>
            </div>

            <!-- Login Form -->
            <div id="login-form" class="auth-form active">
                <h2>Welcome Back!</h2>
                <p class="auth-subtitle">We're so excited to see you again!</p>
                
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="Enter your password" required>
                </div>
                
                <div id="login-error" class="error-message"></div>
                
                <button id="login-btn" class="auth-btn primary">Log In</button>
                
                <p class="auth-switch">
                    Don't have an account? 
                    <a href="#" id="show-signup">Sign Up</a>
                </p>
            </div>

            <!-- Signup Form -->
            <div id="signup-form" class="auth-form" style="display: none;">
                <h2>Create Account</h2>
                <p class="auth-subtitle">Join ConnectHub today!</p>
                
                <div class="form-group">
                    <label for="signup-username">Username</label>
                    <input type="text" id="signup-username" placeholder="Choose a username" required>
                </div>
                
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" placeholder="Create a password" required>
                </div>
                
                <div class="form-group">
                    <label>Choose Avatar</label>
                    <div class="avatar-grid" id="avatar-grid">
                        <!-- Avatars will be generated here -->
                    </div>
                    <input type="hidden" id="selected-avatar">
                </div>
                
                <div id="signup-error" class="error-message"></div>
                
                <button id="signup-btn" class="auth-btn primary">Create Account</button>
                
                <p class="auth-switch">
                    Already have an account? 
                    <a href="#" id="show-login">Log In</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="app-screen" class="app-screen" style="display: none;">
        <!-- Server Sidebar -->
        <div class="server-sidebar">
            <div class="server-icon home-icon" data-server="home" title="Home">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </div>
            
            <div class="server-divider"></div>
            
            <div id="server-list">
                <!-- Servers will be added here -->
            </div>
            
            <div class="server-icon add-server" id="add-server-btn" title="Add Server">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </div>
        </div>

        <!-- Channel Sidebar -->
        <div class="channel-sidebar">
            <div class="server-header">
                <h2 id="current-server-name">Home</h2>
            </div>
            
            <div class="channel-list">
                <!-- Friends Section (Home) -->
                <div id="friends-section">
                    <div class="channel-category">
                        <span>FRIENDS</span>
                    </div>
                    <div class="channel-item" data-view="all-friends">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        <span>All Friends</span>
                    </div>
                    <div class="channel-item" data-view="pending">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        <span>Pending</span>
                        <span class="badge" id="pending-badge" style="display: none;">0</span>
                    </div>
                    <div class="channel-item" data-view="add-friend">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                        <span>Add Friend</span>
                    </div>
                    
                    <!-- Groups Section -->
                    <div class="channel-category" style="margin-top: 20px;">
                        <span>GROUPS</span>
                        <button id="create-group-btn" class="icon-btn" title="Create Group" style="margin-left: auto;">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                    </div>
                    <div id="groups-list">
                        <!-- Groups will appear here -->
                    </div>
                </div>
                
                <!-- Server Channels -->
                <div id="server-channels" style="display: none;">
                    <div class="channel-category">
                        <span>TEXT CHANNELS</span>
                    </div>
                    <div id="text-channels"></div>
                    
                    <div class="channel-category">
                        <span>VOICE CHANNELS</span>
                    </div>
                    <div id="voice-channels"></div>
                </div>
            </div>
            
            <!-- User Profile -->
            <div class="user-profile">
                <img id="user-avatar" src="" alt="Avatar" class="user-avatar">
                <div class="user-info">
                    <div class="user-name" id="user-name">Username</div>
                    <div class="user-status">
                        <span class="status-indicator online"></span>
                        <span>Online</span>
                    </div>
                </div>
                <button id="logout-btn" class="icon-btn" title="Logout">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Friends View -->
            <div id="friends-view" class="content-view">
                <div class="content-header">
                    <h2>Friends</h2>
                    <div class="header-actions">
                        <button class="icon-btn" id="refresh-friends-btn" title="Refresh">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <polyline points="1 20 1 14 7 14"></polyline>
                                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div id="friends-list" class="friends-list">
                    <!-- Friends will be listed here -->
                </div>
            </div>

            <!-- Add Friend View -->
            <div id="add-friend-view" class="content-view" style="display: none;">
                <div class="content-header">
                    <h2>Add Friend</h2>
                </div>
                
                <div class="add-friend-container">
                    <p>You can add friends by searching for their username or email.</p>
                    <div class="search-box">
                        <input type="text" id="friend-search" placeholder="Search users...">
                        <button id="search-users-btn" class="btn primary">Search</button>
                    </div>
                    
                    <div id="search-results" class="search-results">
                        <!-- Search results will appear here -->
                    </div>
                </div>
            </div>

            <!-- Pending Requests View -->
            <div id="pending-view" class="content-view" style="display: none;">
                <div class="content-header">
                    <h2>Pending Friend Requests</h2>
                </div>
                
                <div id="pending-requests-list" class="friends-list">
                    <!-- Pending requests will be listed here -->
                </div>
            </div>

            <!-- Chat View -->
            <div id="chat-view" class="content-view" style="display: none;">
                <div class="content-header">
                    <div class="chat-header-info">
                        <img id="chat-friend-avatar" src="" alt="Avatar" class="chat-avatar">
                        <div>
                            <h2 id="chat-friend-name">Friend Name</h2>
                            <span id="chat-friend-status" class="status-text">Offline</span>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button class="icon-btn" id="voice-call-btn" title="Voice Call">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                            </svg>
                        </button>
                        <button class="icon-btn" id="video-call-btn" title="Video Call">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="23 7 16 12 23 17 23 7"></polygon>
                                <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div id="messages-container" class="messages-container">
                    <!-- Messages will appear here -->
                </div>
                
                <div class="message-input-container">
                    <div class="typing-indicator" id="typing-indicator" style="display: none;">
                        <span id="typing-username">User</span> is typing...
                    </div>
                    <div class="message-input-wrapper">
                        <textarea 
                            id="message-input" 
                            placeholder="Type a message..." 
                            rows="1"
                        ></textarea>
                        <button id="voice-message-btn" class="icon-btn" title="Send Voice Message">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                                <line x1="12" y1="19" x2="12" y2="23"></line>
                                <line x1="8" y1="23" x2="16" y2="23"></line>
                            </svg>
                        </button>
                        <button id="send-message-btn" class="icon-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Video Call Modal -->
        <div id="video-call-modal" class="modal" style="display: none;">
            <div class="video-call-container">
                <div class="video-grid" id="video-grid">
                    <div class="video-tile" id="local-video-container">
                        <video id="local-video" autoplay muted playsinline></video>
                        <div class="video-overlay">
                            <span id="local-user-name">You</span>
                        </div>
                    </div>
                    <div class="video-tile" id="remote-video-container" style="display: none;">
                        <video id="remote-video" autoplay playsinline></video>
                        <div class="video-overlay">
                            <span id="remote-user-name">Friend</span>
                        </div>
                    </div>
                </div>
                
                <div class="call-controls">
                    <button id="toggle-mic-btn" class="call-btn" title="Mute">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                            <line x1="12" y1="19" x2="12" y2="23"></line>
                            <line x1="8" y1="23" x2="16" y2="23"></line>
                        </svg>
                    </button>
                    
                    <button id="toggle-camera-btn" class="call-btn" title="Turn off camera">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                        </svg>
                    </button>
                    
                    <button id="toggle-screen-btn" class="call-btn" title="Share Screen">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                            <path d="M7 10l5 3 5-3"></path>
                        </svg>
                    </button>
                    
                    <button id="end-call-btn" class="call-btn end-call" title="End call">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
                            <line x1="12" y1="2" x2="12" y2="12"></line>
                        </svg>
                    </button>
                </div>
                
                <div class="call-info">
                    <span id="call-duration">00:00</span>
                </div>
            </div>
        </div>

        <!-- Incoming Call Modal -->
        <div id="incoming-call-modal" class="modal" style="display: none;">
            <div class="incoming-call-container">
                <img id="incoming-caller-avatar" src="" alt="Avatar" class="incoming-avatar">
                <h2 id="incoming-caller-name">Friend</h2>
                <p id="incoming-call-type">is calling you...</p>
                
                <div class="incoming-call-actions">
                    <button id="accept-call-btn" class="call-btn accept">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                        </svg>
                        Accept
                    </button>
                    <button id="reject-call-btn" class="call-btn reject">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
                            <line x1="12" y1="2" x2="12" y2="12"></line>
                        </svg>
                        Decline
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div id="create-group-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Create New Group</h2>
            <div class="form-group">
                <input type="text" id="group-name-input" placeholder="Group Name" required>
            </div>
            <div class="form-group">
                <h3>Select Members</h3>
                <div id="group-members-list" class="members-selection-list">
                    <!-- Members will be dynamically added here -->
                </div>
            </div>
            <button id="create-group-confirm-btn" class="primary-btn">Create Group</button>
        </div>
    </div>

    <!-- Animated Background Elements -->
    <div class="animated-grid"></div>
    <div class="gradient-overlay"></div>
    <div class="scanline"></div>
    
    <div class="light-rays">
        <div class="light-ray"></div>
        <div class="light-ray"></div>
        <div class="light-ray"></div>
        <div class="light-ray"></div>
        <div class="light-ray"></div>
        <div class="light-ray"></div>
    </div>

    <div class="geometric-shape circle" style="top: 10%; left: 15%;"></div>
    <div class="geometric-shape square" style="top: 60%; right: 20%;"></div>
    <div class="geometric-shape triangle" style="bottom: 15%; left: 25%;"></div>

    <!-- Background Orbs -->
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/socket.js"></script>
    <script src="js/webrtc.js"></script>
    <script src="js/voice-recorder.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app-main.js"></script>
    <script src="js/modern-effects.js"></script>
</body>
</html>
